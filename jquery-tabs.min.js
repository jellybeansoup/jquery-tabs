/**
* Tabs
*
* Automatically group given elements into a tab group.
* Requires jQuery.
*
* @version 1.0
* @author Daniel Farrelly <daniel@jellystyle.com>
* @link <https://github.com/jellybeansoup/jquery-tabs>
*/(function(e){var t=function(t,n){this._dom.container=t.addClass("ui-tab-container");this._dom.tabContainer=jQuery("<ul></ul>").addClass("ui-tabs").appendTo(this._dom.container);this._dom.tabContainer.on("click","li .ui-tab-select",this,function(t){t.data.select(e(this).parent())});this._dom.tabContainer.on("click","li .ui-tab-remove",this,function(t){t.data.remove(e(this).parent())})};t.prototype={_dom:{container:null,tabContainer:null,tabs:null,panes:null},find:function(e){return typeof e=="string"?this._dom.tabs.filter('[data-tab="'+e+'"]'):this._dom.tabs.filter(e).length>0?e:this._dom.panes.filter(e).length>0?this._tabForPane(e):null},add:function(t,n){if(typeof n!="string"||n.length<=0){t=e("<div></div>").html(t);n=t.find("h1,h2,h3,h4,h5").first().addClass("ui-tab-title").text();t=t.html()}var r="ui-tabs-"+((new Date).getTime()+Math.round(Math.random()*1e6)),i=e("<li></li>").attr("data-tab",r).appendTo(this._dom.tabContainer),s=e("<a></a>").addClass("ui-tab-select").attr("href","#").html(n).appendTo(i),o=e("<a></a>").addClass("ui-tab-remove").attr("href","#").html("Remove").appendTo(i),u=e("<div/>").addClass("ui-tab-content").attr("data-pane",r).html(t).appendTo(this._dom.container);(this._dom.tabs===null||this._dom.tabs.length<=0)&&i.add(u).addClass("selected");this._dom.tabs=this._dom.tabContainer.children().has(".ui-tab-select");this._dom.panes=this._dom.container.children().filter(".ui-tab-content").not(this._dom.tabContainer);return i},remove:function(e){if(!(e=this.find(e)))return;e.hasClass("selected")&&this.select(e.is(":last-child")?e.prev():e.next());e.remove();this._paneForTab(e).remove()},select:function(e){if(!(e=this.find(e)))return;if(e.hasClass("selected"))return;var t=this._paneForTab(e);this._dom.tabs.not(e).add(this._dom.panes.not(t)).removeClass("selected");e.add(t).addClass("selected")},_tabForPane:function(e){var t=e.attr("data-pane");return this._dom.tabs.filter('[data-tab="'+t+'"]')},_paneForTab:function(e){var t=e.attr("data-tab");return this._dom.panes.filter('[data-pane="'+t+'"]')},_version:"1.0"};e.fn.tabs=function(){var n=this.length;for(var r=0;r<n;r++){var i=e(this[r]),s=i.data("JSMTabs");if(typeof s=="object"&&typeof arguments[0]=="string"&&arguments[0].substr(0,1)!=="_"){var o=arguments[0],u=Array.prototype.slice.call(arguments,1);return t.prototype[o].apply(s,u)}s=new t(i,arguments[0]);i.data("JSMTabs",s)}return this};e.tabs=function(t){var n=function(t){var n=e("["+t+"]");if(n.length<=0)return;var r={};for(var i=0;i<n.length;i++){var s,o;if(!(s=e(n[i]).attr(t)))continue;if(!(o=n.filter("["+t+'="'+s+'"]')))continue;n=n.not(o);var u=jQuery("<span></span>").insertBefore(o.first());o.remove();var a=e("<div/>").tabs().attr("id","ui-tabs-"+s),f=o.length;for(var l=0;l<f;l++){var c=e(o[l]),h=c.find("h1,h2,h3,h4,h5").first().addClass("ui-tab-title").text(),p=a.tabs("add",c.html(),h);c.hasClass("selected")&&a.tabs("select",p)}a.insertBefore(u);u.remove()}};e(document).ajaxSuccess(function(e,r,i){for(var s in i.dataTypes)if(i.dataTypes[s]==="html"){n(t);return}});n(t)}})(jQuery);(function(){var e=jQuery,t=document.getElementsByTagName("script");t[t.length-1].src.indexOf("?auto")>-1&&e().ready(function(){e.tabs("data-tab-group")})})();